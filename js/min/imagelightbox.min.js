"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?e(require("jquery"),window,document):e(jQuery,window,document)}(function(C,I,T){var F=C("<div/>").attr("class","imagelightbox-loading"),e=C("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),t=C("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),P=e.add(t),D=C("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),M=C("<a/>",{class:"imagelightbox-close"}),R=C("<div/>",{class:"imagelightbox-overlay"}),z=C("<a/>",{href:"#",class:"imagelightbox-navitem"}),j=C("<div/>",{class:"imagelightbox-nav"}),X=C("<div/>",{class:"imagelightbox-wrapper"}),_=C("body"),a=function(){var e=T.body||T.documentElement;return""===(e=e.style).WebkitTransition?"-webkit-":""===e.MozTransition?"-moz-":""===e.OTransition?"-o-":""===e.transition&&""},L=!1!==a(),N=function(e,t,n){var i={},o=a();i[o+"transform"]="translateX("+t+") translateY(-50%)",i[o+"transition"]=o+"transform "+n+"s linear",e.css(i)},K="ontouchstart"in I,U=I.navigator.pointerEnabled||I.navigator.msPointerEnabled,Y=function(e){if(K)return!0;if(!U||void 0===e||void 0===e.pointerType)return!1;if(void 0!==e.MSPOINTER_TYPE_MOUSE){if(e.MSPOINTER_TYPE_MOUSE!==e.pointerType)return!0}else if("mouse"!==e.pointerType)return!0;return!1},B=!1!=!!(T.fullscreenEnabled||T.webkitFullscreenEnabled||T.mozFullScreenEnabled||T.msFullscreenEnabled);C.fn.imageLightbox=function(e){var c=C.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,fullscreen:!1,gutter:10,offsetY:0,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},e),a=function(){c.activity&&n(),c.arrows&&P.css("display","block")},r=function(){var e=g.index(d)-1;if(e<0){if(!0===c.quitOnEnd)return k(),!1;e=g.length-1}d=g.eq(e),X.trigger("previous.ilb2"),E(1)},l=function(){var e=g.index(d)+1;if(e>=g.length){if(!0===c.quitOnEnd)return k(),!1;e=0}d=g.eq(e),X.trigger("next.ilb2"),E(-1)},t=function(){X.append(F)},n=function(){C(".imagelightbox-loading").remove()},i=function(){X.append(R)},o=function(){M.appendTo(X).on("click.ilb7",function(){return k(),!1})},u=function(){D.html("&nbsp;"),C(d).data("ilb2-caption")?D.html(C(d).data("ilb2-caption")):0<C(d).find("img").length&&D.html(C(d).find("img").attr("alt"))},s=function(){if(g.length){for(var e=0;e<g.length;e++)j.append(z.clone());var t=j.children("a");t.eq(g.index(d)).addClass("active"),X.on("previous.ilb2 next.ilb2",function(){t.removeClass("active").eq(g.index(d)).addClass("active")}),X.append(j),j.on("click.ilb7 touchend.ilb7",function(){return!1}).on("click.ilb7 touchend.ilb7","a",function(){var e=C(this);if(g.eq(e.index()).attr("href")!==C(".imagelightbox").attr("src")){var t=g.eq(e.index());t.length&&(y=g.index(d),d=t,E(e.index()<y?-1:1))}e.addClass("active").siblings().removeClass("active")})}},f=function(){X.append(P),P.on("click.ilb7 touchend.ilb7",function(e){return e.stopImmediatePropagation(),e.preventDefault(),C(this).hasClass("imagelightbox-arrow-left")?r():l(),!1})},p="",g=C([]),d=C(),h=C(),b=0,m=0,v=0,x=!1,y=0,w=function(){if(!h.length)return!0;var e=c.caption?D.outerHeight():0,o=C(I).width(),a=C(I).height()-e,r=Math.abs(1-c.gutter/100),l=new Image;l.src=h.attr("src"),l.onload=function(){if(b=l.width,m=l.height,o<b||a<m){var e=o/a<b/m?b/o:m/a;b/=e,m/=e}var t=m*r,n=b*r,i=(C(I).width()-n)/2;h.css({width:n+"px",height:t+"px",left:i+"px"})}},E=function(o){if(x)return!1;if(h.length){var e={opacity:0};L?N(h,100*o-v+"px",c.animationSpeed/1e3):e.left=parseInt(h.css("left"))+100*o+"px",h.animate(e,c.animationSpeed,function(){q()}),v=0}x=!0,c.activity&&t(),c.caption&&u(),setTimeout(function(){var e=d.attr("href");h=C("<img id='"+c.id+"' />").attr("src",e).on("load.ilb7",function(){var e={opacity:1};if(h.appendTo(X),w(),h.css("opacity",0),L)N(h,-100*o+"px",0),setTimeout(function(){N(h,"0px",c.animationSpeed/1e3)},50);else{var t=parseInt(h.css("left"));e.left=t+"px",h.css("left",t-100*o+"px")}if(h.animate(e,c.animationSpeed,function(){x=!1,a()}),c.preloadNext){var n=g.eq(g.index(d)+1);n.length||(n=g.eq(0)),C("<img />").attr("src",n.attr("href"))}X.trigger("loaded.ilb2")}).on("error.ilb7",function(){a()});var t=0,n=0,i=0;h.on(U?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(e){return e.preventDefault(),c.quitOnImgClick?(k(),!1):!!Y(e.originalEvent)||void((e.pageX||e.originalEvent.pageX)-e.target.offsetLeft<b/2?r():l())}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(e){if(!Y(e.originalEvent)||c.quitOnImgClick)return!0;L&&(i=parseInt(h.css("left"))),t=e.originalEvent.pageX||e.originalEvent.touches[0].pageX}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(e){if(!U&&"pointermove"===e.type||!Y(e.originalEvent)||c.quitOnImgClick)return!0;e.preventDefault(),n=e.originalEvent.pageX||e.originalEvent.touches[0].pageX,v=t-n,L?N(h,-v+"px",0):h.css("left",i-v+"px")}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(e){if(!Y(e.originalEvent)||c.quitOnImgClick)return!0;50<Math.abs(v)?v<0?r():l():L?N(h,"0px",c.animationSpeed/1e3):h.animate({left:i+"px"},c.animationSpeed/2)})},c.animationSpeed+100)},q=function(){if(!h.length)return!1;h.remove(),h=C()},S=function(e){if(x)return!1;x=!1,d=e,function(){c.arrows&&f(this),c.navigation&&s(),c.overlay&&i(),c.button&&o(),c.caption&&X.append(D)}(),_.append(X).addClass("imagelightbox-open"),X.trigger("start.ilb2"),E(0)},k=function(){if(X.trigger("quit.ilb2"),_.removeClass("imagelightbox-open"),!h.length)return!1;h.animate({opacity:0},c.animationSpeed,function(){q(),x=!1,g=C([]),X.remove().find("*").remove()})},O=function(t){t.on("click.ilb7",{set:p},function(e){e.preventDefault(),p=C(e.currentTarget).data("imagelightbox"),t.filter(function(){return C(this).data("imagelightbox")===p}).filter(function(){return function(e){var t=c.allowedTypes;if(!/^(?!\|)[\w|]+(?!\|)$/.test(t))return!1;var n=function(e){var t,n,i,o=T.createElement("a"),a={};for(o.href=e,t=o.search.replace(/^\?/,"").split("&"),i=0;i<t.length;i++)n=t[i].split("="),a[n[0]]=n[1];return{protocol:o.protocol,host:o.host,hostname:o.hostname,port:o.port,pathname:o.pathname,search:o.search,searchObject:a,hash:o.hash}}(e.attr("href")).pathname;return new RegExp(t,"i").test(n)}(C(this))}).each(function(){g=g.add(C(this))}),g.length<1?k():S(C(this))})};return C(I).on("resize.ilb7",w),C(T).ready(function(){c.quitOnDocClick&&C(T).on(K?"touchend.ilb7":"click.ilb7",function(e){h.length&&!C(e.target).is(h)&&(e.preventDefault(),k())}),c.fullscreen&&B&&C(T).on("keydown.ilb7",function(e){if(!h.length)return!0;var t;-1<[9,32,38,40].indexOf(e.which)&&(e.stopPropagation(),e.preventDefault()),-1<[13].indexOf(e.which)&&(e.stopPropagation(),e.preventDefault(),(t=T.getElementById(c.id).parentElement).requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),T.exitFullscreen?T.exitFullscreen():T.mozCancelFullScreen?T.mozCancelFullScreen():T.webkitExitFullscreen&&T.webkitExitFullscreen())}),c.enableKeyboard&&C(T).on("keydown.ilb7",function(e){if(!h.length)return!0;-1<[27].indexOf(e.which)&&c.quitOnEscKey&&(e.stopPropagation(),e.preventDefault(),k()),-1<[37].indexOf(e.which)&&(e.stopPropagation(),e.preventDefault(),r()),-1<[39].indexOf(e.which)&&(e.stopPropagation(),e.preventDefault(),l())})}),C(T).off("click",c.selector),O(C(this)),this.addToImageLightbox=function(e){O(e)},this.loadPreviousImage=function(){r()},this.loadNextImage=function(){l()},this.quitImageLightbox=function(){return k(),this},this.startImageLightbox=function(e){e?e.trigger("click.ilb7"):C(this).trigger("click.ilb7")},this}});